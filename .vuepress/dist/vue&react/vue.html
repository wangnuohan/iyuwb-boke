<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3.0 | 耶温 · 愿你眼里有光，心里有爱</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://iyuwb.gitee.io/boke/assets/img/logo.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="https://iyuwb.gitee.io/boke/assets/css/0.styles.480fcc52.css" as="style"><link rel="preload" href="https://iyuwb.gitee.io/boke/assets/js/app.5e8cfb0c.js" as="script"><link rel="preload" href="https://iyuwb.gitee.io/boke/assets/js/2.3978c3e9.js" as="script"><link rel="preload" href="https://iyuwb.gitee.io/boke/assets/js/20.3281ff2b.js" as="script"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/10.1e01fe26.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/11.e81a8603.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/12.7131e829.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/13.183a26ce.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/14.34f956f1.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/15.c0fce16f.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/16.2b3b852c.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/17.a45e4af5.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/18.203c33cd.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/19.fe077b01.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/3.5e16c404.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/4.a2196294.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/5.a40344b8.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/6.a8b1d4fd.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/7.41b906b5.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/8.3f39bb64.js"><link rel="prefetch" href="https://iyuwb.gitee.io/boke/assets/js/9.b5e4c080.js">
    <link rel="stylesheet" href="https://iyuwb.gitee.io/boke/assets/css/0.styles.480fcc52.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/boke/" class="home-link router-link-active"><img src="https://iyuwb.gitee.io/boke/assets/img/logo.jpg" alt="耶温 · 愿你眼里有光，心里有爱" class="logo"> <span class="site-name can-hide">耶温 · 愿你眼里有光，心里有爱</span></a> <div class="links"><!----> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue3.0</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/boke/vue&amp;react/vue.html#vue优点" class="sidebar-link">Vue优点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/boke/vue&amp;react/vue.html#vue快速入手" class="sidebar-link">Vue快速入手</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/boke/vue&amp;react/vue.html#vue生命周期" class="sidebar-link">Vue生命周期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/boke/vue&amp;react/vue.html#reactive和ref" class="sidebar-link">Reactive和Ref</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/boke/vue&amp;react/vue.html#reactive概要" class="sidebar-link">Reactive概要</a></li><li class="sidebar-sub-header"><a href="/boke/vue&amp;react/vue.html#ref概要" class="sidebar-link">Ref概要</a></li><li class="sidebar-sub-header"><a href="/boke/vue&amp;react/vue.html#reactive和ref的区别" class="sidebar-link">reactive和ref的区别</a></li></ul></li><li><a href="/boke/vue&amp;react/vue.html#递归监听" class="sidebar-link">递归监听</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue3-0"><a href="#vue3-0" class="header-anchor">#</a> Vue3.0</h1> <h2 id="vue优点"><a href="#vue优点" class="header-anchor">#</a> Vue优点</h2> <ul><li><p><strong>性能快</strong></p> <ul><li><p>diff优化</p></li> <li><p>新增静态标记，只比较有静态标志</p></li></ul></li> <li><p>静态提升（hoistStatic）</p> <ul><li>vue2中无论元素是否更新都会重新创建，渲染</li> <li>vue3中对于不参与更新的元素，会做静态提升，只会被创建一次，在渲染时复用</li></ul></li> <li><p>事件监听器缓存（cacheHandlers）</p> <ul><li>Vue2 onClick会被视为动态绑定，每次都会追踪变化</li> <li>Vue3因为事件是同一个函数，直接复用事件</li></ul></li> <li><p>SSR渲染</p></li> <li><p><strong>按需编译，体积更小</strong></p></li> <li><p><strong>组合API</strong></p> <ul><li>入口函数 <code>setup(){ //main }</code></li> <li>定义变量变量 <code>let count = ref(0)</code></li> <li>暴露函数 <code>return {count }</code></li> <li><code>ref</code> 函数只能监听简单类型的变化</li> <li><code>reactive</code> 监听复杂类型的变化、</li> <li><code>setup()</code> 执行时机：
<ul><li>执行<code>setup</code>函数时候,还没有执行<code>created</code>生命周期方法</li> <li>因此无法使用  <code>data</code> 和<code>methods</code> 中的变量和方法</li> <li>Vue为了避免错误使用<code>data</code>和<code>methods</code>中的变量和方法 直接把<code>setup</code>函数中<code>this</code>改为 <code>undefined</code></li></ul></li> <li><code>setup()</code>不能是异步的</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wenbo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">wenbo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> wenbo <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in state.stus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{ item.name }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      stus<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;wenbo&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;yueno&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;zhijian&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>stus<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> add <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>组合API</p> <ul><li>Composition API</li> <li>Option API</li></ul></li> <li><p><strong>更好的Ts支持</strong></p></li> <li><p><strong>暴露自定义渲染API</strong></p></li> <li><p><strong>更先进的组件</strong></p></li></ul> <h2 id="vue快速入手"><a href="#vue快速入手" class="header-anchor">#</a> Vue快速入手</h2> <p><strong>创建Vue的三种方式</strong></p> <ul><li><strong>Vue-CLI</strong></li> <li><strong>Webpack</strong></li> <li><strong>Vite</strong> <ul><li><p>Vue 作者开发的一款意图取代webpack的工具</p></li> <li><p>原理是利用ES6的import会发送请求去加载文件的特性，拦截这些请求，做预编辑，省去Webpack冗长的打包时间</p></li> <li><p>安装Vite</p> <ul><li><code>npm i -g create-vite-app</code></li></ul></li> <li><p>创建Vue3项目</p> <ul><li><code>create-vite-app projectName</code></li></ul></li> <li><p>安装依赖运行</p> <ul><li><code>cd projectName</code></li> <li><code>npm i</code></li> <li><code>npm run dev</code></li></ul></li></ul></li></ul> <h2 id="vue生命周期"><a href="#vue生命周期" class="header-anchor">#</a> Vue生命周期</h2> <ul><li><code>beforeCreate</code> 组件刚被创建，组件的data和methods还没有初始化</li> <li><code>created</code>       组件刚被创建，组件的data和methods已经初始化好</li></ul> <h2 id="reactive和ref"><a href="#reactive和ref" class="header-anchor">#</a> Reactive和Ref</h2> <h3 id="reactive概要"><a href="#reactive概要" class="header-anchor">#</a> Reactive概要</h3> <ul><li><p><code>reactive</code>是Vue3中提供的实现响应式数据的方法</p> <ul><li>在Vue2中是通过<code>defineProperty</code>来实现的</li> <li>在Vue3中响应式数据是通过ES6的<code>Proxy</code>来实现的</li> <li>创建一个响应式数据</li> <li>本质：把传入的数据包装成一个Proxy对象</li></ul></li> <li><p><strong>注意点：</strong></p> <ul><li><code>reactive</code>参数必须是对象<code>(json/arr)</code> <ul><li>如果给<code>reactive</code>传递了其他对象</li> <li>默认情况下修改对象，界面不会更新</li> <li>想更新，可以通过重新赋值</li></ul></li></ul></li></ul> <h3 id="ref概要"><a href="#ref概要" class="header-anchor">#</a> Ref概要</h3> <ul><li><p>和<code>reactive</code>一样用来实现响应式数据的方法</p></li> <li><p><code>ref</code>本质：其实还是<code>reactive</code>，当我们给<code>ref</code>函数传递一个值之后，<code>ref</code>函数底层会自动将<code>ref</code>转成<code>reactive</code> ， <code>ref(xx)-&gt;reactive({value:xx})</code></p> <ul><li>更改数据：<code>age.value=666</code></li></ul></li> <li><p>注意：</p> <ul><li>在<code>Vue</code>中使用<code>ref</code>的值不需要通过<code>value</code>获取</li> <li>在<code>JS</code>中使用<code>ref</code>的值必须通过<code>value</code>获取</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>setup() {
    let a = ref(0);
    function wenbo() {
      a.value = 666;
      //赋值需要 使用变量的 value属性进行赋值
    }
    return { wenbo, a };
  },
  methods: {
    clickWenbo() {
      this.wenbo();
    },
  },
   
</code></pre></div><h3 id="reactive和ref的区别"><a href="#reactive和ref的区别" class="header-anchor">#</a> reactive和ref的区别</h3> <ul><li><p>如果在<code>template</code>里使用的 是<code>ref</code>类型的数据，<code>vue</code>会自动添加 <code>.value</code></p> <ul><li><code>Vue</code>根据 <strong>数据</strong> 的<code>__v_isRef</code>属性判断是否添加 <code>.value</code></li></ul></li> <li><p>如果在<code>template</code>里使用的 是<code>reactive</code>类型的数据，<code>vue</code>不会自动添加 <code>.value</code></p></li></ul> <h2 id="递归监听"><a href="#递归监听" class="header-anchor">#</a> 递归监听</h2> <ul><li><p><strong>递归监听</strong></p> <ul><li><p>默认情况下，无论是ref还是reactive都是递归监听</p></li> <li><p>存在的问题</p> <ul><li>如果数据量很大，非常消耗性能</li></ul></li></ul></li> <li><p><strong>非递归监听</strong></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="https://iyuwb.gitee.io/boke/assets/js/app.5e8cfb0c.js" defer></script><script src="https://iyuwb.gitee.io/boke/assets/js/2.3978c3e9.js" defer></script><script src="https://iyuwb.gitee.io/boke/assets/js/20.3281ff2b.js" defer></script>
  </body>
</html>
